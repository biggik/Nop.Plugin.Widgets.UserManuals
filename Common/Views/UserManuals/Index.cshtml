@{
    Layout = "~/Plugins/Widgets.UserManuals/Views/Shared/_Shared.cshtml";
}
@model List<ManufacturerManualsModel>
@using Nop.Plugin.Widgets.UserManuals.Models;
@using Nop.Plugin.Widgets.UserManuals.Resources;
@using Nop.Plugin.Widgets.UserManuals.Controllers;

<div class="UserManuals">
    <div class="section">
        <div class="title">
            @T(UserManualResources.ListCaption)
        </div>
    </div>
    <div class="clear"></div>
    @{
        foreach (var manufacturer in Model)
        {
            if (!string.IsNullOrWhiteSpace(manufacturer.Name))
            {
                <div class="manufacturer">
                    @manufacturer.Name
                </div>
            }

            foreach (var category in manufacturer.Categories)
            {
                <table>
                    <caption>@category.Category.Name</caption>
                  <thead>
                    <tr>
                      <th scope="col">@T(UserManualResources.Product)</th>
                      <th scope="col"></th>
                      <th scope="col">@T(UserManualResources.UserManual)</th>
                    </tr>
                  </thead>
                  <tbody>
                  
                @foreach (var manual in category.UserManuals)
                {
                    string clazz = manual.IsDiscontinuedProduct ? "discontinued-product" : "";
                    <tr class="@clazz">
                        <td data-label="@T(UserManualResources.Product)">@manual.SortDescription</td>
                        <td data-label="">
                            @if (!string.IsNullOrEmpty(manual.ProductSlug))
                            {
                                <a href="@manual.ProductSlug" target="_blank">@T(UserManualResources.ProductLink)</a>
                            }
                            else 
                            {
                                <p>&nbsp;</p>
                            }
                        </td>
                        <td data-label="@T(UserManualResources.UserManual)">
                            @if (!string.IsNullOrWhiteSpace(manual.OnlineLink))
                            {
                                <a href="@manual.OnlineLink" class="action" target="_blank" title="@T(UserManualResources.OnlineLinkText)">@T(UserManualsActionResources.View)
                                </a>
                            }
                            else 
                            {
                                <p>&nbsp;</p>
                            }
                            @if (manual.DocumentId > 0)
                            {
                                var url = Url.Action(nameof(UserManualsController.UserManualDownload), new { id = manual.DocumentId });

                                <a href="@url" target="_blank" class="action" title="@T(UserManualResources.DownloadText)">@T(UserManualsActionResources.Download)
                                </a>
                            }
                            else 
                            {
                                <p>&nbsp;</p>
                            }
                        </td>
                    </tr>
                }
        
                  </tbody>
                </table>
            }
        }
    }
</div>

